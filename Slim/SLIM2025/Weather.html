<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portsalon Weather</title>
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-react/dist/umd/lucide-react.js"></script>
  </head>
  <body class="bg-sky-50">
    <div id="root"></div>

    <script type="text/javascript">
      const { useState, useEffect } = React;
      const { motion } = window["framer-motion"];
      const { Cloud, CloudRain, CloudSunRain } = lucideReact;

      function WeatherWidget() {
        const [forecast, setForecast] = useState([]);

        useEffect(() => {
          async function getForecast() {
            const apiKey = "c145a15353f90936aa06411cfbf7f82c"; // âœ… your key
            const lat = 55.2; // Portsalon latitude
            const lon = -7.6; // Portsalon longitude
            const res = await fetch(
              `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`
            );
            const data = await res.json();

            // Filter to 7amâ€“7pm on 4th Sept (UTC adjustment if needed)
            const filtered = data.list.filter((entry) => {
              const date = new Date(entry.dt * 1000);
              return (
                date.getUTCDate() === 4 &&
                date.getUTCHours() >= 7 &&
                date.getUTCHours() <= 19
              );
            });

            setForecast(filtered);
          }
          getForecast();
        }, []);

        function getIcon(desc) {
          const d = desc.toLowerCase();
          if (d.includes("rain")) return React.createElement(CloudRain);
          if (d.includes("cloud")) return React.createElement(Cloud);
          return React.createElement(CloudSunRain);
        }

        return React.createElement(
          "div",
          {
            className:
              "max-w-2xl mx-auto p-4 rounded-2xl shadow-lg bg-gradient-to-b from-sky-100 to-sky-200",
          },
          React.createElement(
            "h2",
            { className: "text-xl font-bold mb-4 text-center" },
            "ðŸŒ¦ï¸ Portsalon Weather â€“ Thursday 4 Sept"
          ),
          React.createElement(
            "div",
            { className: "grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3" },
            forecast.map((hour, idx) => {
              const date = new Date(hour.dt * 1000);
              return React.createElement(
                motion.div,
                {
                  key: idx,
                  className:
                    "flex flex-col items-center bg-white p-3 rounded-2xl shadow",
                  whileHover: { scale: 1.05 },
                },
                React.createElement(
                  "span",
                  { className: "text-sm font-semibold" },
                  date.getHours() + ":00"
                ),
                React.createElement(
                  "div",
                  { className: "my-2 text-sky-600" },
                  getIcon(hour.weather[0].description)
                ),
                React.createElement(
                  "span",
                  { className: "text-sm capitalize" },
                  hour.weather[0].description
                ),
                React.createElement(
                  "span",
                  { className: "text-lg font-bold" },
                  Math.round(hour.main.temp) + "Â°C"
                )
              );
            })
          )
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(
        React.createElement(WeatherWidget)
      );
    </script>
  </body>
</html>
